<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="img-src 'self' https: data:; default-src 'self' 'unsafe-inline' 'unsafe-eval' https: wss: ws:;">
    <title>Party Game by Flo</title>
    <link rel="stylesheet" href="/static/style.css">
    <!-- Modal styles minimal -->
    <style>
        .restart-modal {
            display: none;
            position: fixed;
            left: 0; right: 0; top: 0; bottom: 0;
            background: rgba(0,0,0,0.6);
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        .restart-modal .card {
            background: #fff;
            padding: 1.5rem;
            border-radius: 8px;
            max-width: 420px;
            width: 90%;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .restart-modal .actions {
            margin-top: 1rem;
            display: flex;
            gap: 0.5rem;
            justify-content: center;
        }
        .restart-modal button { padding: 0.5rem 1rem; border-radius: 6px; border: none; cursor: pointer; }
        .restart-confirm { background: #1976d2; color: #fff; }
        .restart-cancel { background: #e0e0e0; color: #111; }
    </style>
</head>
<body>
<div class="container">
    <!-- Titre -->
    <h1 class="title">PARTY GAME by flo</h1>

    <!-- Info de la partie -->
    <div id="game-info" class="game-info">
        <div id="ready-status" class="ready-status">
            En attente des joueurs... <span id="ready-count">0/0</span> prÃªts
        </div>
        <div id="question-counter" class="question-counter hidden">
            Question <span id="current-question">1</span> / <span id="total-questions">10</span>
        </div>
    </div>

    <!-- Liste des joueurs et leur statut -->
    <div id="players-status-container" class="players-status-container">
        <h3>ğŸ‘¥ Joueurs</h3>
        <div id="players-status-list" class="players-status-list">
            <!-- La liste sera remplie dynamiquement -->
        </div>
    </div>

    <!-- Bouton PrÃªt -->
    <div id="ready-container" class="ready-container">
        <!-- Formulaire d'ajout de questions -->
        <div id="add-question-container" class="add-question-container">
            <h2>ğŸ“ Ajouter des questions</h2>
            <div class="question-form">
                <div class="file-input-wrapper">
                    <label for="form-question-image" class="file-label">
                        ğŸ“ Choisir une image (PNG/JPG/GIF)
                    </label>
                    <input type="file" id="form-question-image" accept="image/png,image/jpeg,image/jpg,image/gif" required>
                    <span id="file-name" class="file-name">Aucun fichier sÃ©lectionnÃ©</span>
                </div>
                <input type="text" id="form-question-text" placeholder="Votre question" required>
                <input type="text" id="form-question-answer" placeholder="La rÃ©ponse" required>
                <button id="add-question-btn" class="add-question-btn">â• Ajouter la question</button>
            </div>
            <div id="questions-list" class="questions-list">
                <div class="questions-list-header">
                    <h3>Questions ajoutÃ©es (<span id="questions-count">0</span>)</h3>
                    <button id="admin-toggle-btn" class="admin-toggle-btn">ğŸ” Afficher questions (Admin)</button>
                </div>
                <div id="questions-items"></div>
            </div>
        </div>

        <button id="ready-btn" class="ready-btn">Je suis prÃªt ! ğŸ®</button>
    </div>

    <!-- Zone principale du jeu -->
    <div class="game-area hidden" id="game-area">
        <!-- Zone image centrale -->
        <div class="image-zone">
            <div id="timer" class="timer">10</div>
            <img id="question-image" src="/static/assets/tahiti-bob.jpg" alt="Question image">
            <div id="question-text" class="question-text"></div>
        </div>

        <!-- Leaderboard -->
        <div class="leaderboard">
            <h2>LEADERBOARD</h2>
            <div id="leaderboard-list">
                <!-- Les scores seront ajoutÃ©s dynamiquement -->
            </div>
        </div>
    </div>

    <!-- Zone de saisie -->
    <div class="input-zone">
        <input
                type="text"
                id="answer-input"
                placeholder="Entrez votre rÃ©ponse ici..."
                autocomplete="off"
        >
        <button id="submit-btn">Valider</button>
    </div>

    <!-- Zone de feedback -->
    <div id="feedback" class="feedback hidden"></div>

    <!-- Connexion status -->
    <div id="connection-status" class="connection-status">
        <span class="status-dot"></span>
        <span id="status-text">Connexion...</span>
        <span id="player-name-display" class="player-name-display"></span>
        <button id="change-name-btn" class="change-name-btn">âœï¸ Changer mon nom</button>
    </div>
</div>

<!-- Restart confirmation modal -->
<div id="restart-modal" class="restart-modal" role="dialog" aria-hidden="true">
    <div class="card">
        <h3>La partie est terminÃ©e</h3>
        <p>Voulez-vous recommencer la partie comme si vous veniez d'arriver&nbsp;?</p>
        <div class="actions">
            <button id="restart-confirm" class="restart-confirm">Recommencer</button>
            <button id="restart-cancel" class="restart-cancel">Rester</button>
        </div>
    </div>
</div>

<!-- Ready confirmation modal -->
<div id="ready-modal" class="restart-modal" role="dialog" aria-hidden="true" style="display:none">
    <div class="card">
        <h3>PrÃªt pour la prochaine question ?</h3>
        <p>Appuyez sur <strong>PrÃªt</strong> quand vous Ãªtes prÃªt(e) pour la suite.</p>
        <div class="actions">
            <button id="ready-confirm" class="restart-confirm">PrÃªt</button>
            <button id="ready-cancel" class="restart-cancel">Pas encore</button>
        </div>
    </div>
</div>

<script src="/static/script.js"></script>
</body>
</html>